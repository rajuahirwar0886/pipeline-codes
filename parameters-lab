pipeline{
    agent any
    parameters {
  choice choices: ['dev', 'prod'], name: 'env'
  password defaultValue: '', name: 'password'
}

    stages{
        stage('clone'){
            steps {
            sh 'echo clone'
            }
        }
        stage('build'){
            steps {
                sh 'echo build'
            }
        }
        stage('deploy'){
            when {
  environment name: 'env', value: 'prod'
}

            steps {
                sh 'echo deploy'
            }
        }
    }
}

------------------
pipeline{
    agent any
    parameters {
  choice choices: ['trainer ', 'trainee'], name: 'role'
  password defaultValue: '', name: 'definepassword'

}
    stages{
        stage('one'){
            steps {
            sh 'echo trainer and trainee can run'
            }
        }
    stage('two'){
        steps {
            sh 'echo trainer and trainne can run'
        }
    }
    stage('three'){
        when {
  environment name: 'role', value: 'trainer'
}

        steps {
            sh 'echo only trainer will run'
        }
    }
    }
}

